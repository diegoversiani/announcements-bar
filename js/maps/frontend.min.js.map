{"version":3,"sources":["polyfill-closest.js","frontend-announcement-bar.js"],"names":["Element","prototype","matches","msMatchesSelector","webkitMatchesSelector","closest","s","el","this","ancestor","document","documentElement","contains","parentElement","init","addEventListener","handleDocumentClick","_animatedBars","querySelectorAll","_animatedBarsSelector","initializeElementsPosition","loopUpdatePositions","updateElementsPosition","requestAnimationFrame","i","length","innerElement","querySelector","velocity","getAttribute","isNaN","parseInt","_velocity","elementPosition","element","stopped","position","width","getBoundingClientRect","parentWidth","parentNode","_animatedElements","push","handleMouseEnterBar","handleMouseLeaveBar","e","target","dismissAnnouncementBar","preventDefault","announcementBar","removeChild","window","style","transform"],"mappings":"CASA,WACAA,QAAAC,UAAAC,UACAF,QAAAC,UAAAC,QAAAF,QAAAC,UAAAE,mBACAH,QAAAC,UAAAG,uBAEAJ,QAAAC,UAAAI,UACAL,QAAAC,UAAAI,QAAA,SAAAC,GACA,GAAAC,GAAAC,KACAC,EAAAD,IACA,KAAAE,SAAAC,gBAAAC,SAAAL,GAAA,MAAA,KACA,GAAA,CACA,GAAAE,EAAAP,QAAAI,GAAA,MAAAG,EACAA,GAAAA,EAAAI,oBACA,OAAAJ,EACA,OAAA,WCdA,WAEA,YAcA,SAAAK,KACAJ,SAAAK,iBAAA,QAAAC,GAEAC,EAAAP,SAAAQ,iBAAAC,GACAF,IAEAG,IACAC,KASA,QAAAA,KACAC,IACAC,sBAAAF,GAkCA,QAAAD,KACA,IAAA,GAAAI,GAAA,EAAAA,EAAAP,EAAAQ,OAAAD,IAAA,CACA,GAAAE,GAAAT,EAAAO,GAAAG,cAAA,kBACAC,EAAAX,EAAAO,GAAAK,aAAA,gBACAD,GAAAE,MAAAC,SAAAH,IAAAI,EAAAD,SAAAH,EAEA,IAAAK,IACAC,QAAAR,EACAS,SAAA,EACAC,SAAA,EACAR,SAAAA,EACAS,MAAAX,EAAAY,wBAAAD,MACAE,YAAAb,EAAAc,WAAAF,wBAAAD,MAGAI,GAAAC,KAAAT,GAGAhB,EAAAO,GAAAT,iBAAA,aAAA4B,GACA1B,EAAAO,GAAAT,iBAAA,aAAA6B,IAUA,QAAAD,GAAAE,GAEA,IAAA,GADAC,GAAAD,EAAAC,OAAAnB,cAAA,kBACAH,EAAA,EAAAA,EAAAiB,EAAAhB,OAAAD,IACA,GAAAiB,EAAAjB,GAAAU,SAAAY,EAAA,CACAL,EAAAjB,GAAAW,SAAA,CACA,QAWA,QAAAS,GAAAC,GAEA,IAAA,GADAC,GAAAD,EAAAC,OAAAnB,cAAA,kBACAH,EAAA,EAAAA,EAAAiB,EAAAhB,OAAAD,IACA,GAAAiB,EAAAjB,GAAAU,SAAAY,EAAA,CACAL,EAAAjB,GAAAW,SAAA,CACA,QAYA,QAAAnB,GAAA6B,GAEAA,EAAAC,OAAAzC,QAAA,+BACA0C,EAAAF,GAUA,QAAAE,GAAAF,GACAA,EAAAG,gBAEA,IAAAC,GAAAJ,EAAAC,OAAAzC,QAAA,oBACA4C,GAAAT,WAAAU,YAAAD,GA9IAE,OAAApC,iBAAA,OAAAD,EAEA,IACAG,GADAwB,KAEAtB,EAAA,6BACAa,EAAA,GAiCAV,EAAA,WACA,IAAA,GAAAE,GAAA,EAAAA,EAAAiB,EAAAhB,OAAAD,IAEAiB,EAAAjB,GAAAW,UAKAM,EAAAjB,GAAAY,SAAAK,EAAAjB,GAAAY,SAAAK,EAAAjB,GAAAI,SAAA,GAGAa,EAAAjB,GAAAY,SAAAK,EAAAjB,GAAAa,WACAI,EAAAjB,GAAAY,SAAAK,EAAAjB,GAAAe,aAIAE,EAAAjB,GAAAU,QAAAkB,MAAAC,UAAA,cAAAZ,EAAAjB,GAAAY,SAAA","file":"../frontend.min.js","sourcesContent":["/**\n * File polyfill-closest.js.\n *\n * Extend browser support for Element.closest and Element.matches all the way back to IE9.\n *\n * Author: MDN\n * https://developer.mozilla.org/en-US/docs/Web/API/Element/closest#Polyfill\n */\n\n(function () {\n  if (!Element.prototype.matches)\n    Element.prototype.matches = Element.prototype.msMatchesSelector || \n                                Element.prototype.webkitMatchesSelector;\n\n  if (!Element.prototype.closest)\n    Element.prototype.closest = function(s) {\n        var el = this;\n        var ancestor = this;\n        if (!document.documentElement.contains(el)) return null;\n        do {\n            if (ancestor.matches(s)) return ancestor;\n            ancestor = ancestor.parentElement;\n        } while (ancestor !== null); \n        return null;\n    };\n})();\n","/**\n * File frontend-announcement-bar.js.\n *\n * Initialize announcements bar admin backend view.\n *\n * Author: Diego Versiani\n * Contact: https://diegoversiani.me/\n */\n\n(function(){\n\n  'use strict';\n\n  // Run initialize on pageload\n  window.addEventListener( 'load', init );\n\n  var _animatedElements = [];\n  var _animatedBars,\n      _animatedBarsSelector = '.announcement-bar.animated',\n      _velocity = 20;\n\n\n  /**\n   * Initialize component and set related handlers\n   */\n  function init() {\n    document.addEventListener( 'click', handleDocumentClick );\n\n    _animatedBars = document.querySelectorAll( _animatedBarsSelector );\n    if ( _animatedBars ) {\n      // Start animating\n      initializeElementsPosition();\n      loopUpdatePositions();\n    }\n  };\n\n\n\n  /**\n   * Keep updating elements position infinitelly.\n   */\n  function loopUpdatePositions() {\n    updateElementsPosition();\n    requestAnimationFrame( loopUpdatePositions );\n  };\n\n\n\n  /**\n   * Updates moving elements position.\n   * @private\n   */\n  var updateElementsPosition = function () {\n    for (var i = 0; i < _animatedElements.length; i++) {\n      // Go to next if animation stopped for the current element\n      if ( _animatedElements[i].stopped ) {\n        continue;\n      }\n\n      // Update element position in memory\n      _animatedElements[i].position = _animatedElements[i].position - ( _animatedElements[i].velocity / 60); // 60 fps\n      \n      // Fix position to start end of parent\n      if ( _animatedElements[i].position < ( _animatedElements[i].width * -1 ) ) {\n        _animatedElements[i].position = _animatedElements[i].parentWidth;\n      }\n\n      // update element style\n      _animatedElements[i].element.style.transform = 'translateX(' + _animatedElements[i].position + 'px)';\n    }\n  };\n\n\n\n  /**\n   * Initializes positions for each moving element.\n   */\n  function initializeElementsPosition() {\n    for (var i = 0; i < _animatedBars.length; i++) {\n      var innerElement = _animatedBars[i].querySelector( '.announcements' );\n      var velocity = _animatedBars[i].getAttribute( 'data-velocity' );\n      velocity = isNaN( parseInt(velocity) ) ? _velocity : parseInt( velocity );\n\n      var elementPosition = {\n        element: innerElement,\n        stopped: false,\n        position: 0,\n        velocity: velocity,\n        width: innerElement.getBoundingClientRect().width,\n        parentWidth: innerElement.parentNode.getBoundingClientRect().width,\n      };\n\n      _animatedElements.push( elementPosition );\n\n      // Add event listeners for stop/restart animation\n      _animatedBars[i].addEventListener( 'mouseenter', handleMouseEnterBar );\n      _animatedBars[i].addEventListener( 'mouseleave', handleMouseLeaveBar );\n    }\n  };\n\n\n\n  /**\n   * Stop animation when hover a bar.\n   * @param  Object e Click event data.\n   */\n  function handleMouseEnterBar( e ) {\n    var target = e.target.querySelector( '.announcements' );\n    for (var i = 0; i < _animatedElements.length; i++) {\n      if ( _animatedElements[i].element == target ) {\n        _animatedElements[i].stopped = true;\n        break;\n      }\n    }\n  };\n\n\n\n  /**\n   * Restart animation when mouse leave a bar.\n   * @param  Object e Click event data.\n   */\n  function handleMouseLeaveBar( e ) {\n    var target = e.target.querySelector( '.announcements' );\n    for (var i = 0; i < _animatedElements.length; i++) {\n      if ( _animatedElements[i].element == target ) {\n        _animatedElements[i].stopped = false;\n        break;\n      }\n    }\n  };\n\n\n\n\n  /**\n   * Detects clicks to dismiss announcement button.\n   * @param  Object e Click event data.\n   */\n  function handleDocumentClick( e ) {\n    // Dismiss announcement\n    if ( e.target.closest( '.announcement-bar .dismiss' ) ) {\n      dismissAnnouncementBar(e);\n    }\n  };\n\n\n\n  /**\n   * Remove announcement bar row to the view.\n   * @param  Object e Click event data.\n   */\n  function dismissAnnouncementBar( e ) {\n    e.preventDefault();\n\n    var announcementBar = e.target.closest( '.announcement-bar' );\n    announcementBar.parentNode.removeChild( announcementBar );\n  };\n\n})();\n"]}