{"version":3,"sources":["polyfill-closest.js","frontend-announcement-bar.js"],"names":["Element","prototype","matches","msMatchesSelector","webkitMatchesSelector","closest","s","el","this","ancestor","document","documentElement","contains","parentElement","init","addEventListener","handleDocumentClick","_animatedBars","querySelectorAll","_animatedBarsSelector","_allBars","_allBarsSelector","initializeElementsPosition","setTimeout","loopUpdatePositions","_delay","body","classList","add","_bodyClass","i","length","_bodyClassTop","updateElementsPosition","requestAnimationFrame","innerElement","querySelector","velocity","getAttribute","isNaN","parseInt","_velocity","elementPosition","element","stopped","position","width","getBoundingClientRect","parentWidth","parentNode","_animatedElements","push","handleMouseEnterBar","handleMouseLeaveBar","e","target","dismissAnnouncementBar","preventDefault","announcementBar","removeChild","remove","window","style","transform"],"mappings":"CASA,WACAA,QAAAC,UAAAC,UACAF,QAAAC,UAAAC,QAAAF,QAAAC,UAAAE,mBACAH,QAAAC,UAAAG,uBAEAJ,QAAAC,UAAAI,UACAL,QAAAC,UAAAI,QAAA,SAAAC,GACA,GAAAC,GAAAC,KACAC,EAAAD,IACA,KAAAE,SAAAC,gBAAAC,SAAAL,GAAA,MAAA,KACA,GAAA,CACA,GAAAE,EAAAP,QAAAI,GAAA,MAAAG,EACAA,GAAAA,EAAAI,oBACA,OAAAJ,EACA,OAAA,WCdA,WAEA,YAmBA,SAAAK,KACAJ,SAAAK,iBAAA,QAAAC,GAGAC,EAAAP,SAAAQ,iBAAAC,GACAC,EAAAV,SAAAQ,iBAAAG,GAGAJ,IACAK,IAGAC,WAAAC,EAAAC,IAIAf,SAAAgB,KAAAC,UAAAC,IAAAC,EAGA,KAAA,GAAAC,GAAA,EAAAA,EAAAV,EAAAW,OAAAD,IACA,GAAAV,EAAAU,GAAAH,UAAAf,SAAA,OAAA,CACAF,SAAAgB,KAAAC,UAAAC,IAAAI,EACA,QAUA,QAAAR,KACAS,IACAC,sBAAAV,GAkCA,QAAAF,KACA,IAAA,GAAAQ,GAAA,EAAAA,EAAAb,EAAAc,OAAAD,IAAA,CACA,GAAAK,GAAAlB,EAAAa,GAAAM,cAAA,kBACAC,EAAApB,EAAAa,GAAAQ,aAAA,gBACAD,GAAAE,MAAAC,SAAAH,IAAAI,EAAAD,SAAAH,EAEA,IAAAK,IACAC,QAAAR,EACAS,SAAA,EACAC,SAAA,EACAR,SAAAA,EACAS,MAAAX,EAAAY,wBAAAD,MACAE,YAAAb,EAAAc,WAAAF,wBAAAD,MAGAI,GAAAC,KAAAT,GAGAzB,EAAAa,GAAAf,iBAAA,aAAAqC,GACAnC,EAAAa,GAAAf,iBAAA,aAAAsC,IAUA,QAAAD,GAAAE,GAEA,IAAA,GADAC,GAAAD,EAAAC,OAAAnB,cAAA,kBACAN,EAAA,EAAAA,EAAAoB,EAAAnB,OAAAD,IACA,GAAAoB,EAAApB,GAAAa,SAAAY,EAAA,CACAL,EAAApB,GAAAc,SAAA,CACA,QAWA,QAAAS,GAAAC,GAEA,IAAA,GADAC,GAAAD,EAAAC,OAAAnB,cAAA,kBACAN,EAAA,EAAAA,EAAAoB,EAAAnB,OAAAD,IACA,GAAAoB,EAAApB,GAAAa,SAAAY,EAAA,CACAL,EAAApB,GAAAc,SAAA,CACA,QAYA,QAAA5B,GAAAsC,GAEAA,EAAAC,OAAAlD,QAAA,+BACAmD,EAAAF,GAUA,QAAAE,GAAAF,GACAA,EAAAG,gBAEA,IAAAC,GAAAJ,EAAAC,OAAAlD,QAAA,oBACAqD,GAAAT,WAAAU,YAAAD,GAGAtC,EAAAV,SAAAQ,iBAAAG,GAGAqC,EAAA/B,UAAAf,SAAA,QACAF,SAAAgB,KAAAC,UAAAiC,OAAA5B,KAIAZ,GAAAA,EAAAW,QAAA,IACArB,SAAAgB,KAAAC,UAAAiC,OAAA/B,GA/KAgC,OAAA9C,iBAAA,OAAAD,EAEA,IACAG,GAEAG,EAHA8B,KAEA/B,EAAA,6BAEAE,EAAA,oBACAI,EAAA,IACAgB,EAAA,GACAZ,EAAA,uBACAG,EAAA,4BAiDAC,EAAA,WACA,IAAA,GAAAH,GAAA,EAAAA,EAAAoB,EAAAnB,OAAAD,IAEAoB,EAAApB,GAAAc,UAKAM,EAAApB,GAAAe,SAAAK,EAAApB,GAAAe,SAAAK,EAAApB,GAAAO,SAAA,GAGAa,EAAApB,GAAAe,SAAAK,EAAApB,GAAAgB,WACAI,EAAApB,GAAAe,SAAAK,EAAApB,GAAAkB,aAIAE,EAAApB,GAAAa,QAAAmB,MAAAC,UAAA,cAAAb,EAAApB,GAAAe,SAAA","file":"../frontend.min.js","sourcesContent":["/**\n * File polyfill-closest.js.\n *\n * Extend browser support for Element.closest and Element.matches all the way back to IE9.\n *\n * Author: MDN\n * https://developer.mozilla.org/en-US/docs/Web/API/Element/closest#Polyfill\n */\n\n(function () {\n  if (!Element.prototype.matches)\n    Element.prototype.matches = Element.prototype.msMatchesSelector || \n                                Element.prototype.webkitMatchesSelector;\n\n  if (!Element.prototype.closest)\n    Element.prototype.closest = function(s) {\n        var el = this;\n        var ancestor = this;\n        if (!document.documentElement.contains(el)) return null;\n        do {\n            if (ancestor.matches(s)) return ancestor;\n            ancestor = ancestor.parentElement;\n        } while (ancestor !== null); \n        return null;\n    };\n})();\n","/**\n * File frontend-announcement-bar.js.\n *\n * Initialize announcements bar admin backend view.\n *\n * Author: Diego Versiani\n * Contact: https://diegoversiani.me/\n */\n\n(function(){\n\n  'use strict';\n\n  // Run initialize on pageload\n  window.addEventListener( 'load', init );\n\n  var _animatedElements = [];\n  var _animatedBars,\n      _animatedBarsSelector = '.announcement-bar.animated',\n      _allBars,\n      _allBarsSelector = '.announcement-bar',\n      _delay = 2000, // milliseconds\n      _velocity = 20, // pixels per second\n      _bodyClass = 'has-announcement-bar',\n      _bodyClassTop = 'has-announcement-bar--top';\n\n\n  /**\n   * Initialize component and set related handlers\n   */\n  function init() {\n    document.addEventListener( 'click', handleDocumentClick );\n\n    // Get bars\n    _animatedBars = document.querySelectorAll( _animatedBarsSelector );\n    _allBars = document.querySelectorAll( _allBarsSelector );\n\n    // Prepare animations\n    if ( _animatedBars ) {\n      initializeElementsPosition();\n      \n      // Start animating\n      setTimeout( loopUpdatePositions, _delay );\n    }\n\n    // Add body class\n    document.body.classList.add( _bodyClass );\n\n    // Add body class 'top' if there are top bars being displayed\n    for (var i = 0; i < _allBars.length; i++) {\n      if ( _allBars[i].classList.contains( 'top' ) ) {\n        document.body.classList.add( _bodyClassTop );\n        break;\n      }\n    }\n  };\n\n\n\n  /**\n   * Keep updating elements position infinitelly.\n   */\n  function loopUpdatePositions() {\n    updateElementsPosition();\n    requestAnimationFrame( loopUpdatePositions );\n  };\n\n\n\n  /**\n   * Updates moving elements position.\n   * @private\n   */\n  var updateElementsPosition = function () {\n    for (var i = 0; i < _animatedElements.length; i++) {\n      // Go to next if animation stopped for the current element\n      if ( _animatedElements[i].stopped ) {\n        continue;\n      }\n\n      // Update element position in memory\n      _animatedElements[i].position = _animatedElements[i].position - ( _animatedElements[i].velocity / 60); // 60 fps\n      \n      // Fix position to start end of parent\n      if ( _animatedElements[i].position < ( _animatedElements[i].width * -1 ) ) {\n        _animatedElements[i].position = _animatedElements[i].parentWidth;\n      }\n\n      // update element style\n      _animatedElements[i].element.style.transform = 'translateX(' + _animatedElements[i].position + 'px)';\n    }\n  };\n\n\n\n  /**\n   * Initializes positions for each moving element.\n   */\n  function initializeElementsPosition() {\n    for (var i = 0; i < _animatedBars.length; i++) {\n      var innerElement = _animatedBars[i].querySelector( '.announcements' );\n      var velocity = _animatedBars[i].getAttribute( 'data-velocity' );\n      velocity = isNaN( parseInt(velocity) ) ? _velocity : parseInt( velocity );\n\n      var elementPosition = {\n        element: innerElement,\n        stopped: false,\n        position: 0,\n        velocity: velocity,\n        width: innerElement.getBoundingClientRect().width,\n        parentWidth: innerElement.parentNode.getBoundingClientRect().width,\n      };\n\n      _animatedElements.push( elementPosition );\n\n      // Add event listeners for stop/restart animation\n      _animatedBars[i].addEventListener( 'mouseenter', handleMouseEnterBar );\n      _animatedBars[i].addEventListener( 'mouseleave', handleMouseLeaveBar );\n    }\n  };\n\n\n\n  /**\n   * Stop animation when hover a bar.\n   * @param  Object e Click event data.\n   */\n  function handleMouseEnterBar( e ) {\n    var target = e.target.querySelector( '.announcements' );\n    for (var i = 0; i < _animatedElements.length; i++) {\n      if ( _animatedElements[i].element == target ) {\n        _animatedElements[i].stopped = true;\n        break;\n      }\n    }\n  };\n\n\n\n  /**\n   * Restart animation when mouse leave a bar.\n   * @param  Object e Click event data.\n   */\n  function handleMouseLeaveBar( e ) {\n    var target = e.target.querySelector( '.announcements' );\n    for (var i = 0; i < _animatedElements.length; i++) {\n      if ( _animatedElements[i].element == target ) {\n        _animatedElements[i].stopped = false;\n        break;\n      }\n    }\n  };\n\n\n\n\n  /**\n   * Detects clicks to dismiss announcement button.\n   * @param  Object e Click event data.\n   */\n  function handleDocumentClick( e ) {\n    // Dismiss announcement\n    if ( e.target.closest( '.announcement-bar .dismiss' ) ) {\n      dismissAnnouncementBar(e);\n    }\n  };\n\n\n\n  /**\n   * Remove announcement bar row to the view.\n   * @param  Object e Click event data.\n   */\n  function dismissAnnouncementBar( e ) {\n    e.preventDefault();\n\n    var announcementBar = e.target.closest( '.announcement-bar' );\n    announcementBar.parentNode.removeChild( announcementBar );\n\n    // Update _allBars\n    _allBars = document.querySelectorAll( _allBarsSelector );\n\n    // Remove top class from body element\n    if ( announcementBar.classList.contains( 'top' ) ) {\n      document.body.classList.remove( _bodyClassTop );\n    }\n\n    // Remove has bar body class\n    if ( !_allBars || _allBars.length <= 0 ) {\n      document.body.classList.remove( _bodyClass );\n    }\n  };\n\n})();\n"]}